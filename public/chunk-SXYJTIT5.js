import{a as P,b as r,c as D,d as N,e as k,f as I,g as F,h as A,i as T,j as q}from"./chunk-IHONKXOH.js";import{a as B}from"./chunk-XE4A3MOZ.js";import"./chunk-GU6JWO6J.js";import{B as c,E as d,G as b,H as v,J as C,M as u,N as a,O as S,P as g,Q as m,R as y,S as p,T as V,U as _,Y as x,ia as E,ka as w,o as s,q as l,v as f,w as h}from"./chunk-EDOQMP4J.js";function M(o,i){if(o&1){let G=g();u(0,"button",7),m("click",function(){f(G);let t=y();return h(t.deleteProduct())}),p(1,"Delete Product"),a()}}var L=(()=>{let i=class i{constructor(){this.fb=s(T),this.ar=s(E),this.productService=s(B),this.router=s(w),this.isEditView=d(!1),this.productID=d(null),this.form=this.fb.group({name:["",r.required],description:["",r.required],price:[0,[r.required,r.min(1)]],stock:[0,[r.required,r.min(0)]]})}ngOnInit(){let{id:e}=this.ar.snapshot.params;if(e){this.isEditView.set(!0),this.productID.set(e),this.fetchProduct(this.productID());return}}fetchProduct(e){this.productService.detail(e).subscribe({next:({data:t})=>{t&&this.form.patchValue({name:t.name,description:t.description,price:t.price,stock:t.stock})}})}submit(){if(this.form.invalid)return this.form.markAllAsTouched();if(!this.isEditView())return this.create();if(this.isEditView())return this.update()}update(){let e=this.form.value;this.productService.update(this.productID(),e).subscribe({next:()=>{this.router.navigateByUrl("/app/product/list")}})}create(){let e=this.form.value;this.productService.create(e).subscribe({next:()=>{this.router.navigateByUrl("/app/product/list")}})}deleteProduct(){this.productService.remove(this.productID()).subscribe({next:()=>{this.router.navigateByUrl("/app/product/list")}})}};i.\u0275fac=function(t){return new(t||i)},i.\u0275cmp=l({type:i,selectors:[["app-product"]],standalone:!0,features:[x],decls:10,vars:4,consts:[[3,"ngSubmit","formGroup"],["placeholder","name","type","text","formControlName","name"],["placeholder","description","formControlName","description"],["type","number","placeholder","Price","formControlName","price"],["type","number","placeholder","Stock","formControlName","stock"],["type","submit"],["type","button"],["type","button",3,"click"]],template:function(t,n){t&1&&(u(0,"h1"),p(1),a(),u(2,"form",0),m("ngSubmit",function(){return n.submit()}),S(3,"input",1)(4,"textarea",2)(5,"input",3)(6,"input",4),u(7,"button",5),p(8),a()(),b(9,M,2,0,"button",6)),t&2&&(c(),_("",n.isEditView()?"Edit":"Create"," Product"),c(),v("formGroup",n.form),c(6),V(n.isEditView()?"Edit":"Create"),c(),C(9,n.isEditView()?9:-1))},dependencies:[q,k,P,I,D,N,F,A]});let o=i;return o})();export{L as ProductComponent};
