import{d as e,k as _}from"./chunk-EDOQMP4J.js";var l=(()=>{let i=class i{constructor(){this.CART_STORAGE_NAME="PRODUCTS_CART",this._cart=[],this._cart$=new e(this._cart),this.cart$=this._cart$.asObservable()}get cart(){return this._cart}get total(){return this._cart.reduce((t,r)=>t+r.product.price*r.quantity,0)}initializeCart(){let t=localStorage.getItem(this.CART_STORAGE_NAME);t&&(this._cart=JSON.parse(t),this._cart$.next(this._cart))}setCart(t){this._cart=t,this._cart$.next(this._cart),localStorage.setItem(this.CART_STORAGE_NAME,JSON.stringify(this._cart))}removeFromCart(t){this._cart=this._cart.filter(r=>r.product._id!==t._id),this._cart$.next(this._cart),localStorage.setItem(this.CART_STORAGE_NAME,JSON.stringify(this._cart))}addToCart(t,r){let s=this._cart,c=this._cart.findIndex(o=>o.product._id===t._id);c===-1?s.push({product:t,quantity:1}):s[c].quantity+=r,this._cart=s,this._cart$.next(this._cart),localStorage.setItem(this.CART_STORAGE_NAME,JSON.stringify(this._cart))}clearCart(){this._cart=[],this._cart$.next(this._cart),localStorage.removeItem(this.CART_STORAGE_NAME)}};i.\u0275fac=function(r){return new(r||i)},i.\u0275prov=_({token:i,factory:i.\u0275fac,providedIn:"root"});let a=i;return a})();export{l as a};
