import{a as $}from"./chunk-KMLU6LUC.js";import{a as V}from"./chunk-RB5GFL6C.js";import{a as A}from"./chunk-XE4A3MOZ.js";import"./chunk-GU6JWO6J.js";import"./chunk-5MDO62B3.js";import{$ as F,B as a,F as k,G as x,H as y,J as f,K as E,L,M as r,N as o,O as P,P as v,Q as C,R as d,S as c,T as m,U as T,Y as g,_ as w,da as D,h as S,la as I,o as l,q as h,v as u,w as _,y as b}from"./chunk-EDOQMP4J.js";var M=(t,e)=>e._id;function R(t,e){t&1&&(r(0,"button",0),c(1,"Create"),o())}function j(t,e){if(t&1){let n=v();r(0,"button",2),c(1,"Edit"),o(),r(2,"button",1),C("click",function(){u(n);let s=d().$implicit,p=d();return _(p.deleteProduct(s))}),c(3,"Delete"),o()}if(t&2){let n=d().$implicit;y("routerLink","/app/product/"+n._id)}}function B(t,e){if(t&1){let n=v();r(0,"div")(1,"h3"),c(2),o(),P(3,"hr"),r(4,"p"),c(5),o(),r(6,"label")(7,"b"),c(8),o()(),r(9,"p"),c(10),w(11,"currency"),o(),x(12,j,4,1),r(13,"button",1),C("click",function(){let s=u(n).$implicit,p=d();return _(p.cartService.addToCart(s,1))}),c(14," Add to Cart "),o()()}if(t&2){let n=e.$implicit,i=d();a(2),m(n.name),a(3),m(n.description),a(3),T("",n.stock," Units"),a(2),m(F(11,5,n.price)),a(2),f(12,i.isAdmin?12:-1)}}var Q=(()=>{let e=class e extends ${constructor(){super(),this.productService=l(A),this.cartService=l(V),l(b).onDestroy(()=>{this.productService.products.set([])})}ngOnInit(){this.fetchProducts()}fetchProducts(){this.productService.list().pipe(S(({data:i=[]})=>{this.productService.products.set(i)})).subscribe({next:i=>console.log(i)})}deleteProduct(i){this.productService.remove(i._id).subscribe({next:()=>{this.fetchProducts()}})}};e.\u0275fac=function(s){return new(s||e)},e.\u0275cmp=h({type:e,selectors:[["app-list"]],standalone:!0,features:[k,g],decls:5,vars:1,consts:[["type","button","routerLink","/app/product"],["type","button",3,"click"],["type","button",3,"routerLink"]],template:function(s,p){s&1&&(r(0,"h1"),c(1,"Product list"),o(),x(2,R,2,0,"button",0),E(3,B,15,7,"div",null,M)),s&2&&(a(2),f(2,p.isAdmin?2:-1),a(),L(p.productService.products()))},dependencies:[I,D]});let t=e;return t})();export{Q as ListComponent};
