import{a as q}from"./chunk-N4C3QDGY.js";import{a as x,b as s,c as N,d as R,e as F,g as I,h as L,i as A,j}from"./chunk-IHONKXOH.js";import{a as k}from"./chunk-GU6JWO6J.js";import{a as w}from"./chunk-5MDO62B3.js";import{B as h,H as g,M as a,N as m,O as v,Q as S,S as l,Y as b,a as u,ea as y,k as c,ka as p,la as C,n as f,o,q as d}from"./chunk-EDOQMP4J.js";var D=(()=>{let e=class e extends k{constructor(t){super(t),this._http=t,this.URL=`${this.URL_API}auth/register`}};e.\u0275fac=function(r){return new(r||e)(f(y))},e.\u0275prov=c({token:e,factory:e.\u0275fac,providedIn:"root"});let i=e;return i})();var K=(()=>{let e=class e{constructor(){this.router=o(p),this.registerService=o(D),this.loginService=o(q),this.sessionService=o(w),this._router=o(p),this.fb=o(A),this.form=this.fb.group({email:["",[s.required,s.email]],password:["",[s.required]],name:["",[s.required]],type:["user",[s.required]]})}register(){if(this.form.invalid)return this.form.markAllAsTouched();let t=u({},this.form.value);this.registerService.create(t).subscribe({next:r=>{this.login({email:t.email,password:t.password})}})}login({email:t,password:r}){this.loginService.create({email:t,password:r}).subscribe({next:({data:n})=>{n&&(this.sessionService.setSession(n),this._router.navigateByUrl("/app/product/list",{replaceUrl:!0}))}})}};e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=d({type:e,selectors:[["app-register"]],standalone:!0,features:[b],decls:10,vars:1,consts:[[3,"ngSubmit","formGroup"],["placeholder","email","type","email","formControlName","email"],["placeholder","password","type","password","formControlName","password"],["placeholder","name","type","text","formControlName","name"],["type","submit"],["routerLink","/auth/login"]],template:function(r,n){r&1&&(a(0,"h1"),l(1,"Register"),m(),a(2,"form",0),S("ngSubmit",function(){return n.register()}),v(3,"input",1)(4,"input",2)(5,"input",3),a(6,"button",4),l(7,"Register"),m()(),a(8,"a",5),l(9,"LogIn"),m()),r&2&&(h(2),g("formGroup",n.form))},dependencies:[j,F,x,N,R,I,L,C]});let i=e;return i})();export{K as RegisterComponent};
