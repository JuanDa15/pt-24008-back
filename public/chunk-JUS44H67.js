import"./chunk-6QO6FJD2.js";import{a as q}from"./chunk-VQZM2X26.js";import{a as $}from"./chunk-RB5GFL6C.js";import"./chunk-GU6JWO6J.js";import{$ as V,B as a,G as y,H as x,J as h,K as E,L as T,M as r,N as n,O as k,P as v,Q as _,R as p,S as o,T as C,U as f,Y as w,_ as O,ca as g,ka as F,o as u,q as b,v as s,w as m}from"./chunk-EDOQMP4J.js";var I=(c,i)=>i.product._id;function D(c,i){if(c&1){let t=v();r(0,"div")(1,"h4"),o(2),n(),k(3,"hr"),r(4,"p"),o(5),n(),r(6,"p"),o(7),n(),r(8,"button",1),_("click",function(){let e=s(t).$implicit,d=p(2);return m(d.cartService.removeFromCart(e.product))}),o(9," Delete "),n(),r(10,"div")(11,"button",0),_("click",function(){let e=s(t).$implicit,d=p(2);return m(d.cartService.addToCart(e.product,1))}),o(12," + "),n(),r(13,"p"),o(14),n(),r(15,"button",0),_("click",function(){let e=s(t).$implicit,d=p(2);return m(d.cartService.addToCart(e.product,-1))}),o(16," - "),n()()()}if(c&2){let t=i.$implicit;a(2),C(t.product.name),a(3),C(t.product.description),a(2),C(t.product.price),a(4),x("disabled",t.quantity>=t.product.stock),a(3),f(" ",t.quantity," "),a(),x("disabled",t.quantity===1)}}function M(c,i){if(c&1){let t=v();E(0,D,17,6,"div",null,I),r(2,"h4"),o(3),n(),r(4,"button",0),_("click",function(){s(t);let e=p();return m(e.submit())}),o(5,` Order
`),n()}if(c&2){let t=i,l=p();T(t),a(3),f("Total: ",l.cartService.total,""),a(),x("disabled",t.length===0)}}var G=(()=>{let i=class i{constructor(){this.cartService=u($),this.cart=u(q),this.router=u(F)}submit(){let l=this.cartService.cart.map(e=>({product:e.product._id,quantity:e.quantity}));this.cart.create({products:l}).subscribe({next:()=>{this.router.navigateByUrl("/app/cart/orders"),this.cartService.clearCart()}})}};i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=b({type:i,selectors:[["app-order"]],standalone:!0,features:[w],decls:4,vars:3,consts:[["type","button",3,"click","disabled"],["type","button",3,"click"]],template:function(e,d){if(e&1&&(r(0,"h1"),o(1,"COMPLETE YOUR ORDER"),n(),y(2,M,6,2),O(3,"async")),e&2){let S;a(2),h(2,(S=V(3,1,d.cartService.cart$))?2:-1,S)}},dependencies:[g]});let c=i;return c})();export{G as OrderComponent};
